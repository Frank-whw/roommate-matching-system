@import "tailwindcss";
/*
  ---break---
*/
@custom-variant dark (&:is(.dark *));

@import "tw-animate-css";

@variant dark (&:is(.dark *));

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

@layer utilities {
  body {
    font-family: "Manrope", Arial, Helvetica, sans-serif;
  }
  /* 页面级背景：以 --background 为底色，叠加主色的轻度径向渐变，随主题色/明暗自动变化 */
  .app-page-bg {
    background-color: hsl(var(--background));
    background-image:
      radial-gradient(1400px 700px at 20% -10%, hsl(var(--primary) / 0.16), transparent 60%),
      linear-gradient(to bottom right, hsl(var(--background)), hsl(var(--background)));
  }
  .dark .app-page-bg {
    background-color: hsl(var(--background));
    background-image:
      /* 左上角亮区 - 大幅增强亮度 */
      radial-gradient(1400px 700px at -5% -5%, hsl(var(--primary) / 0.85), transparent 40%),
      /* 右上角亮区 */
      radial-gradient(1200px 600px at 105% -5%, hsl(var(--primary) / 0.75), transparent 35%),
      /* 右下角亮区 */
      radial-gradient(1000px 500px at 105% 105%, hsl(var(--primary) / 0.7), transparent 30%),
      /* 左下角亮区 */
      radial-gradient(800px 400px at -5% 105%, hsl(var(--primary) / 0.65), transparent 25%),
      /* 中心暗区 - 创建更强烈的明暗对比 */
      radial-gradient(2500px 1250px at 50% 50%, transparent 0%, hsl(var(--background) / 0.5) 20%, hsl(var(--background) / 0.75) 45%, hsl(var(--background) / 0.95) 70%, transparent 100%),
      /* 对角线渐变 - 从左上到右下，增强对比度 */
      linear-gradient(135deg, 
        hsl(var(--primary) / 0.5) 0%, 
        hsl(var(--primary) / 0.25) 15%, 
        hsl(var(--primary) / 0.08) 35%, 
        hsl(var(--background) / 0.99) 50%, 
        hsl(var(--primary) / 0.08) 65%, 
        hsl(var(--primary) / 0.25) 85%, 
        hsl(var(--primary) / 0.5) 100%
      );
    position: relative;
  }
  
  /* 暗夜模式下的额外光效 */
  .dark .app-page-bg::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image:
      /* 增强左上到右下的渐变效果 - 大幅增强对比度 */
      linear-gradient(135deg, 
        hsl(var(--primary) / 0.4) 0%, 
        hsl(var(--primary) / 0.2) 15%, 
        hsl(var(--primary) / 0.08) 35%, 
        transparent 50%, 
        hsl(var(--primary) / 0.08) 65%, 
        hsl(var(--primary) / 0.2) 85%, 
        hsl(var(--primary) / 0.4) 100%
      ),
      /* 添加微妙的径向渐变增强效果 */
      radial-gradient(1800px 900px at 20% 20%, hsl(var(--primary) / 0.12), transparent 75%),
      radial-gradient(1600px 800px at 80% 80%, hsl(var(--primary) / 0.12), transparent 75%),
      /* 添加对角线光带效果 - 增强亮度 */
      linear-gradient(135deg, 
        transparent 0%, 
        hsl(var(--primary) / 0.05) 45%, 
        hsl(var(--primary) / 0.1) 50%, 
        hsl(var(--primary) / 0.05) 55%, 
        transparent 100%
      );
    pointer-events: none;
    z-index: -1;
    animation: dark-glow 30s ease-in-out infinite alternate;
  }
  
  /* 移动端暗黑模式光效优化 */
  @media (max-width: 768px) {
    .dark .app-page-bg::before {
      background-image:
        /* 移动端温和的渐变效果 */
        linear-gradient(135deg, 
          hsl(var(--primary) / 0.2) 0%, 
          hsl(var(--primary) / 0.1) 20%, 
          hsl(var(--primary) / 0.05) 40%, 
          transparent 50%, 
          hsl(var(--primary) / 0.05) 60%, 
          hsl(var(--primary) / 0.1) 80%, 
          hsl(var(--primary) / 0.2) 100%
        ),
        /* 移动端温和的径向渐变 */
        radial-gradient(1200px 600px at 20% 20%, hsl(var(--primary) / 0.06), transparent 80%),
        radial-gradient(1000px 500px at 80% 80%, hsl(var(--primary) / 0.06), transparent 80%),
        /* 移动端温和的光带效果 */
        linear-gradient(135deg, 
          transparent 0%, 
          hsl(var(--primary) / 0.02) 45%, 
          hsl(var(--primary) / 0.04) 50%, 
          hsl(var(--primary) / 0.02) 55%, 
          transparent 100%
        );
      animation: dark-glow 40s ease-in-out infinite alternate;
    }
  }
  
  /* 暗夜模式渐变动画 */
  @keyframes dark-glow {
    0% {
      opacity: 0.6;
      transform: scale(1) rotate(0deg);
    }
    25% {
      opacity: 0.95;
      transform: scale(1.02) rotate(0.5deg);
    }
    50% {
      opacity: 1;
      transform: scale(1.03) rotate(0deg);
    }
    75% {
      opacity: 0.9;
      transform: scale(1.02) rotate(-0.5deg);
    }
    100% {
      opacity: 0.7;
      transform: scale(0.98) rotate(0deg);
    }
  }
  
  /* 移动端温和的动画效果 */
  @media (max-width: 768px) {
    @keyframes dark-glow {
      0% {
        opacity: 0.8;
        transform: scale(1) rotate(0deg);
      }
      25% {
        opacity: 0.9;
        transform: scale(1.01) rotate(0.2deg);
      }
      50% {
        opacity: 1;
        transform: scale(1.015) rotate(0deg);
      }
      75% {
        opacity: 0.85;
        transform: scale(1.01) rotate(-0.2deg);
      }
      100% {
        opacity: 0.75;
        transform: scale(0.99) rotate(0deg);
      }
    }
  }
  

  
  /* 首页特定优化 */
  .homepage-hero {
    min-height: calc(100vh - 8rem);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* 确保在小屏幕上文本不会过于拥挤 */
  @media (max-width: 640px) {
    .homepage-hero {
      min-height: calc(100vh - 6rem);
      padding: 1rem 0;
    }
    
    /* 移动端暗黑模式文本增强 */
    .dark .homepage-hero h1 {
      text-shadow: 0 1px 6px hsl(var(--primary) / 0.15);
    }
    
    .dark .homepage-hero p {
      text-shadow: 0 1px 3px hsl(var(--primary) / 0.08);
    }
    
    /* 移动端暗黑模式最后一行文字优化 */
    .dark .homepage-hero p:last-of-type {
      text-shadow: 0 1px 3px hsl(var(--primary) / 0.08);
    }
  }
  
  /* 优化大屏幕上的显示效果 */
  @media (min-width: 1280px) {
    .homepage-hero {
      min-height: calc(100vh - 10rem);
    }
    
    /* 大屏幕暗黑模式文本增强 */
    .dark .homepage-hero h1 {
      text-shadow: 0 3px 12px hsl(var(--primary) / 0.12);
    }
    
    .dark .homepage-hero p {
      text-shadow: 0 2px 6px hsl(var(--primary) / 0.06);
    }
    
    .dark .homepage-hero h1 .text-primary {
      text-shadow: 0 3px 16px hsl(var(--primary) / 0.4);
      filter: drop-shadow(0 0 12px hsl(var(--primary) / 0.25));
    }
  }
  
  /* 首页文本优化 */
  .homepage-hero h1 {
    font-weight: 700;
    letter-spacing: -0.025em;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  .homepage-hero p {
    font-weight: 400;
    letter-spacing: 0.01em;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* 暗黑模式下首页文本增强可读性 */
  .dark .homepage-hero h1 {
    color: hsl(0 0% 98%);
    text-shadow: 0 2px 8px hsl(var(--primary) / 0.1);
    font-weight: 800;
  }
  
  .dark .homepage-hero p {
    color: hsl(0 0% 90%);
    text-shadow: 0 1px 4px hsl(var(--primary) / 0.05);
    font-weight: 500;
  }
  
  /* 暗黑模式下副标题文本增强 */
  .dark .homepage-hero p.text-muted-foreground {
    color: hsl(0 0% 85%);
    text-shadow: 0 1px 3px hsl(var(--primary) / 0.08);
  }
  
  /* 暗黑模式下主标题中的主题色文本增强 */
  .dark .homepage-hero h1 .text-primary {
    color: hsl(var(--primary));
    text-shadow: 0 2px 12px hsl(var(--primary) / 0.3);
    filter: drop-shadow(0 0 8px hsl(var(--primary) / 0.2));
  }
  
  /* 暗黑模式下按钮文本增强 */
  .dark .homepage-hero .bg-primary {
    color: hsl(0 0% 98%);
    text-shadow: 0 1px 2px hsl(0 0% 0% / 0.2);
  }
  
  /* 移动端防止最后一行文字换行 */
  @media (max-width: 640px) {
    .homepage-hero p:last-of-type {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 0.875rem;
      line-height: 1.4;
    }
  }
  
  /* 中等屏幕优化 */
  @media (min-width: 641px) and (max-width: 768px) {
    .homepage-hero p:last-of-type {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 1rem;
      line-height: 1.5;
    }
  }
  
  /* 副标题文本样式 */
  .homepage-hero p.font-medium {
    font-weight: 500;
    letter-spacing: 0.02em;
    color: hsl(var(--muted-foreground) / 0.9);
  }
  
  /* 描述文本样式 */
  .homepage-hero p.font-light {
    font-weight: 300;
    letter-spacing: 0.015em;
    color: hsl(var(--muted-foreground) / 0.8);
  }
  
  /* 按钮文本样式 */
  .homepage-hero .font-semibold {
    font-weight: 600;
    letter-spacing: 0.025em;
  }
  
  /* 优化字间距 */
  .homepage-hero .tracking-wide {
    letter-spacing: 0.025em;
  }
  
  /* 新的圆润文本样式 */
  .homepage-hero p.font-normal {
    font-weight: 400;
    letter-spacing: 0.02em;
    color: hsl(var(--muted-foreground) / 0.85);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* 按钮圆润样式 */
  .homepage-hero .font-medium {
    font-weight: 500;
    letter-spacing: 0.025em;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* 确保文本在移动端有合适的行高 */
  @media (max-width: 640px) {
    .homepage-hero h1 {
      line-height: 1.1;
    }
    .homepage-hero p {
      line-height: 1.6;
    }
    .homepage-hero p.font-medium {
      line-height: 1.5;
    }
    .homepage-hero p.font-light {
      line-height: 1.7;
    }
    .homepage-hero p.font-normal {
      line-height: 1.65;
    }
  }
  
  /* 桌面端优化 */
  @media (min-width: 641px) {
    .homepage-hero p.font-normal {
      line-height: 1.7;
    }
  }
  
  /* 优化按钮悬停效果 */
  .homepage-hero .group:hover .transition-transform {
    transform: translateX(0.25rem);
  }
  
  /* 确保文本容器有合适的最大宽度 */
  .homepage-hero .max-w-2xl {
    max-width: 42rem;
  }
  
  .homepage-hero .max-w-3xl {
    max-width: 48rem;
  }
  
  /* 暗夜模式下的卡片增强效果 */
  .dark .bg-card {
    background: linear-gradient(135deg, 
      hsl(var(--card) / 0.95), 
      hsl(var(--card) / 0.85) 50%, 
      hsl(var(--card) / 0.9)
    );
    backdrop-filter: blur(10px);
    border: 1px solid hsl(var(--border) / 0.3);
  }
  
  /* 暗夜模式下的输入框增强效果 */
  .dark .bg-background {
    background: linear-gradient(135deg, 
      hsl(var(--background) / 0.98), 
      hsl(var(--background) / 0.95)
    );
  }
  
  /* 响应式渐变调整 */
  @media (max-width: 768px) {
    .dark .app-page-bg {
      background-image:
        /* 移动端优化 - 轻微渐变效果 */
        radial-gradient(800px 400px at 20% -10%, hsl(var(--primary) / 0.08), transparent 60%),
        linear-gradient(to bottom right, hsl(var(--background)), hsl(var(--background)));
    }
  }
  
  /* 大屏幕增强效果 */
  @media (min-width: 1920px) {
    .dark .app-page-bg {
      background-image:
        /* 大屏幕增强 - 大幅增强对比度 */
        radial-gradient(2000px 1000px at -5% -5%, hsl(var(--primary) / 0.95), transparent 45%),
        radial-gradient(1800px 900px at 105% -5%, hsl(var(--primary) / 0.85), transparent 40%),
        radial-gradient(1600px 800px at 105% 105%, hsl(var(--primary) / 0.8), transparent 35%),
        radial-gradient(1400px 700px at -5% 105%, hsl(var(--primary) / 0.75), transparent 30%),
        radial-gradient(3500px 1750px at 50% 50%, transparent 0%, hsl(var(--background) / 0.3) 15%, hsl(var(--background) / 0.6) 40%, hsl(var(--background) / 0.9) 75%, transparent 100%),
        linear-gradient(135deg, 
          hsl(var(--primary) / 0.6) 0%, 
          hsl(var(--primary) / 0.3) 15%, 
          hsl(var(--primary) / 0.1) 35%, 
          hsl(var(--background) / 0.99) 50%, 
          hsl(var(--primary) / 0.1) 65%, 
          hsl(var(--primary) / 0.3) 85%, 
          hsl(var(--primary) / 0.6) 100%
        );
    }
  }
  
  /* 暗夜模式下的按钮增强效果 */
  .dark .bg-primary {
    background: linear-gradient(135deg, 
      hsl(var(--primary) / 0.95), 
      hsl(var(--primary) / 0.85) 50%, 
      hsl(var(--primary) / 0.9)
    );
    box-shadow: 0 4px 12px hsl(var(--primary) / 0.3);
  }
  
  .dark .bg-primary:hover {
    background: linear-gradient(135deg, 
      hsl(var(--primary) / 1), 
      hsl(var(--primary) / 0.9) 50%, 
      hsl(var(--primary) / 0.95)
    );
    box-shadow: 0 6px 16px hsl(var(--primary) / 0.4);
    transform: translateY(-1px);
  }
  
  /* 暗夜模式下的边框增强效果 */
  .dark .border {
    border-color: hsl(var(--border) / 0.4);
  }
  
  .dark .border-border {
    border-color: hsl(var(--border) / 0.5);
  }
  
  /* 暗夜模式下的下拉菜单增强效果 */
  .dark [data-radix-popper-content-wrapper] {
    background: linear-gradient(135deg, 
      hsl(var(--popover) / 0.95), 
      hsl(var(--popover) / 0.85) 50%, 
      hsl(var(--popover) / 0.9)
    );
    backdrop-filter: blur(15px);
    border: 1px solid hsl(var(--border) / 0.3);
    box-shadow: 0 8px 32px hsl(var(--primary) / 0.1);
  }
  
  /* 暗夜模式下的轮廓按钮增强效果 */
  .dark .border-input {
    border-color: hsl(var(--input) / 0.6);
    background: linear-gradient(135deg, 
      hsl(var(--background) / 0.9), 
      hsl(var(--background) / 0.8)
    );
  }
  
  .dark .border-input:hover {
    border-color: hsl(var(--primary) / 0.5);
    background: linear-gradient(135deg, 
      hsl(var(--background) / 0.95), 
      hsl(var(--background) / 0.85)
    );
    box-shadow: 0 0 0 1px hsl(var(--primary) / 0.2);
  }
}

/* Theme transitions */
@layer base {
  * {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, box-shadow, transform;
    transition-duration: 200ms;
    transition-timing-function: ease-out;
  }

  /* Fix for Radix UI dropdowns - prevent transform transitions that cause positioning issues */
  [data-radix-popper-content-wrapper],
  [data-radix-dropdown-menu-content],
  [data-radix-select-content],
  [data-radix-popover-content],
  [data-radix-tooltip-content] {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, box-shadow !important;
  }
  
  /* Override for specific elements that shouldn't transition */
  input, textarea, select {
    transition: none;
  }
  
  /* Fix for Radix UI dropdowns/popovers - exclude transform transitions to prevent positioning issues */
  [data-radix-popper-content-wrapper],
  [data-radix-dropdown-menu-content],
  [data-radix-select-content],
  [data-radix-popover-content],
  [data-radix-tooltip-content],
  [data-radix-hover-card-content],
  [data-state="open"][role="menu"],
  [data-state="open"][role="listbox"] {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, box-shadow !important;
  }
  
  /* 暗夜模式下的特殊过渡效果 */
  .dark * {
    transition-duration: 250ms;
  }
  
  /* Ensure dark mode overrides also respect Radix UI positioning */
  .dark [data-radix-popper-content-wrapper],
  .dark [data-radix-dropdown-menu-content],
  .dark [data-radix-select-content],
  .dark [data-radix-popover-content],
  .dark [data-radix-tooltip-content],
  .dark [data-radix-hover-card-content],
  .dark [data-state="open"][role="menu"],
  .dark [data-state="open"][role="listbox"] {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, box-shadow !important;
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 217 91% 59%; /* Default blue theme */
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 10% 3.9%;
    --radius: 0.6rem;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 217 91% 59%; /* Keep same theme color in dark mode */
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 5% 64.9%;
  }
}

/* 仅控制不同主题色的页面背景变量，确保切换主题时背景明显变化 */
@layer base {
  .theme-blue { --background: 210 100% 97%; }
  .theme-green { --background: 140 60% 96%; }
  .theme-orange { --background: 32 100% 96%; }
  .theme-red { --background: 0 100% 96%; }

  .dark.theme-blue { --background: 222 47% 3%; }
  .dark.theme-green { --background: 150 6% 2%; }
  .dark.theme-orange { --background: 20 14% 2%; }
  .dark.theme-red { --background: 350 25% 2%; }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Toast动画 */
@keyframes toast-progress {
  from {
    width: 100%;
  }
  to {
    width: 0%;
  }
}

/* 表单验证样式 */
@layer components {
  .required::after {
    content: ' *';
    color: hsl(var(--destructive));
  }
  
  /* 错误状态的输入框 */
  .input-error {
    @apply border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500;
  }
  
  /* 成功状态的输入框 */
  .input-success {
    @apply border-green-300 dark:border-green-700 focus:border-green-500 focus:ring-green-500;
  }
}

/* 首页图标修复样式 - 确保图标中心透明 */
@layer components {
  /* 首页箭头图标 - 使用更精确的选择器 */
  .homepage-hero .ml-2.h-5.w-5.sm\\:h-6.sm\\:w-6 svg,
  .homepage-hero .ml-2.h-5.w-5.sm\\:h-6.sm\\:w-6 svg *,
  .homepage-hero .ml-2.h-5.w-5.sm\\:h-6.sm\\:w-6 svg path {
    fill: none !important;
    stroke: currentColor !important;
  }
  
  /* 头部导航房屋图标 - 使用更精确的选择器 */
  header .h-6.w-6.text-primary svg,
  header .h-6.w-6.text-primary svg *,
  header .h-6.w-6.text-primary svg path {
    fill: none !important;
    stroke: currentColor !important;
  }
  
  /* 匹配广场放大镜图标 - 使用更精确的选择器 */
  .w-8.h-8.mr-3.text-pink-500 svg,
  .w-8.h-8.mr-3.text-pink-500 svg *,
  .w-8.h-8.mr-3.text-pink-500 svg path {
    fill: none !important;
    stroke: currentColor !important;
  }
}