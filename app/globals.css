@import "tailwindcss";
/*
  ---break---
*/
@custom-variant dark (&:is(.dark *));

@import "tw-animate-css";

@variant dark (&:is(.dark *));

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

@layer utilities {
  body {
    font-family: "Manrope", Arial, Helvetica, sans-serif;
  }
  /* 页面级背景：以 --background 为底色，叠加主色的轻度径向渐变，随主题色/明暗自动变化 */
  .app-page-bg {
    background-color: hsl(var(--background));
    background-image:
      radial-gradient(1400px 700px at 20% -10%, hsl(var(--primary) / 0.16), transparent 60%),
      linear-gradient(to bottom right, hsl(var(--background)), hsl(var(--background)));
  }
  .dark .app-page-bg {
    background-color: hsl(var(--background));
    background-image:
      radial-gradient(1400px 700px at 20% -10%, hsl(var(--primary) / 0.28), transparent 60%),
      linear-gradient(to bottom right, hsl(var(--background)), hsl(var(--background)));
  }
}

/* Theme transitions */
@layer base {
  * {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
    transition-duration: 200ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Override for specific elements that shouldn't transition */
  input, textarea, select {
    transition: none;
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 217 91% 59%; /* Default blue theme */
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 10% 3.9%;
    --radius: 0.6rem;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 217 91% 59%; /* Keep same theme color in dark mode */
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 5% 64.9%;
  }
}

/* 仅控制不同主题色的页面背景变量，确保切换主题时背景明显变化 */
@layer base {
  .theme-blue { --background: 210 100% 97%; }
  .theme-green { --background: 140 60% 96%; }
  .theme-orange { --background: 32 100% 96%; }
  .theme-red { --background: 0 100% 96%; }

  .dark.theme-blue { --background: 222 47% 9%; }
  .dark.theme-green { --background: 150 6% 8%; }
  .dark.theme-orange { --background: 20 14% 8%; }
  .dark.theme-red { --background: 350 25% 8%; }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Toast动画 */
@keyframes toast-progress {
  from {
    width: 100%;
  }
  to {
    width: 0%;
  }
}

/* 表单验证样式 */
@layer components {
  .required::after {
    content: ' *';
    color: hsl(var(--destructive));
  }
  
  /* 错误状态的输入框 */
  .input-error {
    @apply border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500;
  }
  
  /* 成功状态的输入框 */
  .input-success {
    @apply border-green-300 dark:border-green-700 focus:border-green-500 focus:ring-green-500;
  }
}